<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Kiro - Envío de ubicación</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: Arial, sans-serif; text-align: center; padding: 20px;">

<h2>Obteniendo ubicación...</h2>
<p>Por favor, espera unos segundos.</p>

<script>
function enviarUbicacion(lat, lon) {
    const linkGoogleMaps = `https://www.google.com/maps?q=${lat},${lon}`;
    const mensaje = `El collar de Kiro acaba de ser escaneado y ha sido encontrado en la siguiente ubicación:\n${linkGoogleMaps}`;

    fetch("https://formspree.io/f/meozvdjo", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Accept": "application/json"
        },
        body: JSON.stringify({
            email: "pamunoz.s97@gmail.com",
            message: mensaje
        })
    })
    .then(response => {
        console.log("Ubicación enviada con éxito");
        window.location.href = "https://sites.google.com/view/kiromunozslimming";
    })
    .catch(error => {
        console.error("Error al enviar:", error);
        window.location.href = "https://sites.google.com/view/kiromunozslimming";
    });
}

function obtenerUbicacion() {
    if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(
            position => {
                enviarUbicacion(position.coords.latitude, position.coords.longitude);
            },
            error => {
                alert("No se pudo obtener la ubicación.");
                window.location.href = "https://sites.google.com/view/kiromunozslimming";
            },
            { enableHighAccuracy: true, timeout: 10000 }
        );
    } else {
        alert("Geolocalización no soportada.");
        window.location.href = "https://sites.google.com/view/kiromunozslimming";
    }
}

obtenerUbicacion();
</script>

</body>
</html>
